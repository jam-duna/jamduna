#!/bin/bash
# Build and test JAM EVM components
# Usage: ./jamtest

set -e  # Exit immediately if any command fails

echo "=== JAM Test Build Script ==="
echo ""

echo "Step 1: Building EVM service..."
cd services
if ! make evm; then
    echo "✗ EVM service build FAILED"
    exit 1
fi
cd ..
echo "✓ EVM service build complete"
echo ""

echo "Step 2: Building duna_spec..."
if ! make duna_spec; then
    echo "✗ duna_spec build FAILED"
    exit 1
fi
echo "✓ duna_spec build complete"
echo ""

echo "Step 3: Building EVM node interpreter..."
cd node
if ! make evm_node_interpreter; then
    echo "✗ EVM node interpreter build FAILED"
    exit 1
fi
cd ..
echo "✓ EVM node interpreter build complete"
echo ""

echo "=== All builds completed successfully ==="
